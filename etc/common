# grima

GRIMA_HOME=${TOPLEVEL:="${GRIMA_HOME}"}
GRIMA_HOME=$(cd "${GRIMA_HOME}"; pwd)
export GRIMA_HOME

GRIMA_BIN="${GRIMA_HOME}"/bin
export GRIMA_BIN

GRIMA_ETC="${GRIMA_HOME}"/etc
export GRIMA_ETC

GRIMA_LIB="${GRIMA_HOME}"/lib
export GRIMA_LIB

GRIMA_SHARE="${GRIMA_HOME}"/share
export GRIMA_SHARE

GRIMA_SRC="${GRIMA_HOME}"/src
export GRIMA_SRC

GRIMA_VAR="${GRIMA_HOME}"/var
export GRIMA_VAR

GRIMA_ARCHIVE="${GRIMA_VAR}"/archive
export GRIMA_ARCHIVE

GRIMA_DATA="${GRIMA_VAR}"/data
export GRIMA_DATA

GRIMA_DB="${GRIMA_VAR}"/db
export GRIMA_DB

GRIMA_LOG="${GRIMA_VAR}"/log
export GRIMA_LOG

GRIMA_RUN="${GRIMA_VAR}"/run
export GRIMA_RUN

GRIMA_WWW="${GRIMA_VAR}"/www
export GRIMA_WWW

GRIMA_CONFIGUREFLAGS="--prefix=${GRIMA_HOME}" 
export GRIMA_CONFIGUREFLAGS

GRIMA_LOGFILE="${GRIMA_LOG}"/grima.log
export GRIMA_LOGFILE

grima_record()
{
        date                    >> "${GRIMA_LOGFILE}"
        echo "$@"               >> "${GRIMA_LOGFILE}"
}

grima_recorde()
{
        grima_record            "$@"
        echo                    "$@"
}

PATH="${GRIMA_BIN}":"${PATH}"
export PATH

LD_LIBRARY_PATH="${GRIMA_LIB}":"${LD_LIBRARY_PATH}"
export LD_LIBRARY_PATH

PYTHONPATH="${GRIMA_LIB}"/python:"${PYTHONPATH}"
export PYTHONPATH

if [ -d "${GRIMA_HOME}"/dist ]; then
	JARFILES="$(find "${GRIMA_HOME}"/dist -name "*.jar")"
	for jarfile in ${JARFILES}; do
		CLASSPATH="${jarfile}":"${CLASSPATH}"
		export CLASSPATH
	done
fi

if [ -d "${GRIMA_LIB}"/java ]; then
	JARFILES="$(find "${GRIMA_LIB}"/java -name "*.jar")"
	for jarfile in ${JARFILES}; do
		CLASSPATH="${jarfile}":"${CLASSPATH}"
		export CLASSPATH
	done
fi

DEPENDS_HOME="${GRIMA_SHARE}"
. "${DEPENDS_HOME}"/depends

GRIMA_SVNFLAGS=
export GRIMA_SVNFLAGS

GRIMA_ACLOCALFLAGS="${ACLOCALFLAGS} -I ${DEPENDS_HOME}/aclocal"
export GRIMA_ACLOCALFLAGS

GRIMA_MAKEFLAGS=
export GRIMA_MAKEFLAGS

GRIMA_PYTHONFLAGS=
export GRIMA_PYTHONFLAGS

GRIMA_JAVAFLAGS="${JAVAFLAGS} -Dgrima.home=${GRIMA_HOME} \
	-Djava.util.logging.config.file=${GRIMA_ETC}/grima.properties"
export GRIMA_JAVAFLAGS

GRIMA_ANTFLAGS=
export GRIMA_ANTFLAGS

# extras

GRIMA_EXTRAS=" \
        Elrond                  \
"

for x in ${GRIMA_EXTRAS}; do
        TOPLEVEL=${GRIMA_HOME}/extras/${x}
        . ${TOPLEVEL}/etc/common
done
